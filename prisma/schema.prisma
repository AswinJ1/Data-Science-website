generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

enum Role {
  ADMIN
  APPLICANT
}

enum JobType {
  FULL_TIME
  PART_TIME
  CONTRACT
  INTERNSHIP
}

enum ApplicationStatus {
  APPLIED
  UNDER_REVIEW
  SHORTLISTED
  REJECTED
  SELECTED
}

enum BlogStatus {
  DRAFT
  PUBLISHED
}

model User {
  id            String        @id @default(cuid())
  name          String?
  email         String        @unique
  password      String
  role          Role          @default(APPLICANT)
  image         String?
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  applications  Application[]
  blogs         Blog[]

  @@map("users")
}

model Job {
  id            String        @id @default(cuid())
  title         String
  slug          String        @unique
  description   String        @db.Text
  location      String
  type          JobType       @default(FULL_TIME)
  experience    String
  skills        String[]
  salary        String?
  isActive      Boolean       @default(true)
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  applications  Application[]

  @@map("jobs")
}

model Application {
  id            String            @id @default(cuid())
  userId        String
  jobId         String
  fullName      String
  email         String
  phone         String
  education     String
  institution   String
  experience    String?
  linkedin      String?
  resume        String
  coverLetter   String?           @db.Text
  status        ApplicationStatus @default(APPLIED)
  createdAt     DateTime          @default(now())
  updatedAt     DateTime          @updatedAt
  user          User              @relation(fields: [userId], references: [id], onDelete: Cascade)
  job           Job               @relation(fields: [jobId], references: [id], onDelete: Cascade)

  @@unique([userId, jobId])
  @@map("applications")
}

model Blog {
  id              String      @id @default(cuid())
  title           String
  slug            String      @unique
  excerpt         String      @db.Text
  content         String      @db.Text
  featuredImage   String?
  metaTitle       String?
  metaDescription String?     @db.Text
  status          BlogStatus  @default(DRAFT)
  authorId        String
  categoryId      String
  publishedAt     DateTime?
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  author          User        @relation(fields: [authorId], references: [id], onDelete: Cascade)
  category        Category    @relation(fields: [categoryId], references: [id])

  @@map("blogs")
}

model Category {
  id        String   @id @default(cuid())
  name      String   @unique
  slug      String   @unique
  createdAt DateTime @default(now())
  blogs     Blog[]

  @@map("categories")
}

model Solution {
  id          String   @id @default(cuid())
  title       String
  slug        String   @unique
  industry    String
  description String   @db.Text
  icon        String?
  features    String[]
  isActive    Boolean  @default(true)
  order       Int      @default(0)
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@map("solutions")
}

enum ContactStatus {
  NEW
  READ
  RESPONDED
}

enum NotificationType {
  NEW_APPLICATION
  NEW_CONTACT
  STATUS_UPDATE
}

model ContactSubmission {
  id        String        @id @default(cuid())
  firstName String
  lastName  String
  email     String
  company   String?
  industry  String?
  service   String?
  timeline  String?
  message   String?       @db.Text
  status    ContactStatus @default(NEW)
  createdAt DateTime      @default(now())

  @@map("contact_submissions")
}

model Notification {
  id        String           @id @default(cuid())
  type      NotificationType
  title     String
  message   String
  read      Boolean          @default(false)
  link      String?
  createdAt DateTime         @default(now())

  @@map("notifications")
}
